

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pynbody.family &mdash; pynbody v0.13-alpha documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.13-alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="pynbody v0.13-alpha documentation" href="../../index.html" />
    <link rel="up" title="pynbody" href="../pynbody.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">pynbody v0.13-alpha documentation</a> &raquo;</li>
          <li><a href="../index.html" >Module code</a> &raquo;</li>
          <li><a href="../pynbody.html" accesskey="U">pynbody</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for pynbody.family</h1><pre>
New Family objects are automatically registered so that
snapshots can use them in the normal syntax (snap.dm,
snap.star, etc).

In practice the easiest way to make use of the flexibility
this module provides is through adding more families of
particles in your config.ini."""

from . import config_parser


_registry = []

def family_names(with_aliases=False) :
    """Returns a list of the names of all particle families.
<div class="viewcode-block" id="family_names"><a class="viewcode-back" href="../../index.html#pynbody.family.family_names">[docs]</a>    If with_aliases is True, include aliases in the list."""
    
    global _registry
    l = []
    for o in _registry :
        l.append(o.name)
        if with_aliases :
            for a in o.aliases : l.append(a)
    return l

def get_family(name, create=False) :
    """Returns a family corresponding to the specified string.  If the</div>
<div class="viewcode-block" id="get_family"><a class="viewcode-back" href="../../index.html#pynbody.family.get_family">[docs]</a>    family does not exist and create is False, raises ValueError. If
    the family does not exist and create is True, an appropriate
    object is instantiated, registered and returned."""
    
    if isinstance(name, Family) :
        return name

    name = name.lower() # or should it check and raise rather than just convert? Not sure.
    for n in _registry :
        if n.name==name or name in n.aliases :
            return n

    if create :
        return Family(name)
    else :
        raise ValueError, name+" not a family" # is ValueError the right thing here?

class Family(object) :
    def __init__(self, name, aliases=[]) :</div>
        if name!=name.lower() :
            raise ValueError, "Family names must be lower case"
        if name in family_names(with_aliases=True) :
            raise ValueError, "Family name "+name+" is not unique"
        for a in aliases :
            if a!=a.lower() :
                raise ValueError, "Aliases must be lower case"

        self.name = name
        self.aliases = aliases
        _registry.append(self)

    def __repr__(self) :
        return "&lt;Family "+self.name+"&gt;"

    def __reduce__(self) :
        return get_family, (self.name, True), {"aliases": self.aliases}


# Instantiate the default families as specified
# by the configuration file

g = globals()
for f in config_parser.options('families') :
    aliases = config_parser.get('families', f)
    g[f] = Family(f,map(str.strip,aliases.split(","))) 
</pre>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">pynbody v0.13-alpha documentation</a> &raquo;</li>
          <li><a href="../index.html" >Module code</a> &raquo;</li>
          <li><a href="../pynbody.html" >pynbody</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Andrew Pontzen, Rok Roskar, Greg Stinson, Tom Quinn, Rory Woods, Jonathan Coles, Simeon Bird, Jo Bovy, Darren Reed.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.8.
    </div>
  </body>
</html>