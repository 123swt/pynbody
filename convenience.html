<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Generic Convenience Modules &mdash; pynbody 0.30 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.1.0/spacelab/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.30',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="pynbody 0.30 documentation" href="index.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38063425-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          pynbody</a>
        <span class="navbar-text navbar-version pull-left"><b>0.30</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Sections <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/tutorials.html">Tutorials &amp; walkthroughs</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference/index.html">Reference</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Generic Convenience Modules</a><ul>
<li><a class="reference internal" href="#bridge">bridge</a></li>
<li><a class="reference internal" href="#filt">filt</a></li>
<li><a class="reference internal" href="#halo">halo</a></li>
<li><a class="reference internal" href="#sph">sph</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="module-pynbody.bridge">
<span id="generic-convenience-modules"></span><h1>Generic Convenience Modules<a class="headerlink" href="#module-pynbody.bridge" title="Permalink to this headline">¶</a></h1>
<div class="section" id="bridge">
<h2>bridge<a class="headerlink" href="#bridge" title="Permalink to this headline">¶</a></h2>
<p>The bridge module has tools for connecting different outputs. For instance,
it&#8217;s possible to take a subview (e.g. a halo) from one snapshot and &#8216;push&#8217;
it into the other. This is especially useful if the two snapshots are
different time outputs of the same simulation.</p>
<p>Once connected, bridge called on a specific subset of particles in
output1 will trace these particles back (or forward) to the output2,
enabling observing a change in their properties, such as position,
temperature, etc.</p>
<p>For a tutorial on how to use the bridge module to trace the particles
in your simulation, see the <a class="reference external" href="http://pynbody.github.io/pynbody/tutorials/bridge.html">bridge tutorial</a>.</p>
<dl class="class">
<dt id="pynbody.bridge.Bridge">
<em class="property">class </em><tt class="descclassname">pynbody.bridge.</tt><tt class="descname">Bridge</tt><big>(</big><em>start</em>, <em>end</em><big>)</big><a class="reference internal" href="_modules/pynbody/bridge.html#Bridge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.bridge.Bridge" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic Bridge class</p>
<dl class="method">
<dt id="pynbody.bridge.Bridge.is_same">
<tt class="descname">is_same</tt><big>(</big><em>i1</em>, <em>i2</em><big>)</big><a class="reference internal" href="_modules/pynbody/bridge.html#Bridge.is_same"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.bridge.Bridge.is_same" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns true if the particle i1 in the start point is the same
as the particle i2 in the end point.</p>
</dd></dl>

<dl class="method">
<dt id="pynbody.bridge.Bridge.match_catalog">
<tt class="descname">match_catalog</tt><big>(</big><em>min_index=1</em>, <em>max_index=30</em>, <em>threshold=0.5</em><big>)</big><a class="reference internal" href="_modules/pynbody/bridge.html#Bridge.match_catalog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.bridge.Bridge.match_catalog" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a Halos object groups_1, a Halos object groups_2 and a
Bridge object connecting the two parent simulations, this identifies
the most likely ID&#8217;s in groups_2 of the objects specified in groups_1.</p>
<p>Parameters min_index and max_index are the minimum and maximum halo
numbers to be matched (in both ends of the bridge). If max_index is
too large, the catalogue matching can take prohibitively long (it
scales as max_index^2).</p>
<p>This routine currently uses particle number as a proxy for mass, so that the
main simulation data does not need to be loaded.</p>
<p>If b links snapshot f1 (high redshift) to f2 (low redshift) and we set</p>
<blockquote>
<div>cat = b.match_catalog()</div></blockquote>
<p>then cat is now a numpy index array such that f1.halos()[i] is the
major progenitor for f2.halos()[cat[i]], assuming cat[i] is positive.</p>
<p>cat[0:min_index+1] is set to -2. Halos which cannot be matched because
they have too few particles in common give the result -1. This is determined
by the given threshold fraction of particles in common (by default, 50%).</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pynbody.bridge.OrderBridge">
<em class="property">class </em><tt class="descclassname">pynbody.bridge.</tt><tt class="descname">OrderBridge</tt><big>(</big><em>start</em>, <em>end</em>, <em>order_array='iord'</em>, <em>monotonic=True</em><big>)</big><a class="reference internal" href="_modules/pynbody/bridge.html#OrderBridge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.bridge.OrderBridge" title="Permalink to this definition">¶</a></dt>
<dd><p>An OrderBridge uses integer arrays in two simulations
(start,end) where particles i_start and i_end are
defined to be the same if and only if
start[order_array][i_start] == start[order_array][i_end].</p>
<p>If monotonic is True, order_array must be monotonically increasing
in both ends of the bridge (and this is not checked for you). If
monotonic is False, the bridging is slower but this is the
failsafe option.</p>
</dd></dl>

<dl class="function">
<dt id="pynbody.bridge.bridge_factory">
<tt class="descclassname">pynbody.bridge.</tt><tt class="descname">bridge_factory</tt><big>(</big><em>a</em>, <em>b</em><big>)</big><a class="reference internal" href="_modules/pynbody/bridge.html#bridge_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.bridge.bridge_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a bridge connecting the two specified snapshots. For
more information see <em class="xref std std-ref">bridge-tutorial</em>.</p>
</dd></dl>

</div>
<span class="target" id="module-pynbody.filt"></span><div class="section" id="filt">
<h2>filt<a class="headerlink" href="#filt" title="Permalink to this headline">¶</a></h2>
<p>Defines and implements &#8216;filters&#8217; which allow abstract subsets
of data to be specified.</p>
<p>See the <a class="reference external" href="http://pynbody.github.io/pynbody/tutorials/filters.html">filter tutorial</a> for some
sample usage.</p>
<dl class="class">
<dt id="pynbody.filt.Sphere">
<em class="property">class </em><tt class="descclassname">pynbody.filt.</tt><tt class="descname">Sphere</tt><big>(</big><em>radius</em>, <em>cen=(0</em>, <em>0</em>, <em>0)</em><big>)</big><a class="reference internal" href="_modules/pynbody/filt.html#Sphere"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.filt.Sphere" title="Permalink to this definition">¶</a></dt>
<dd><p>Return particles that are within <cite>radius</cite> of the point <cite>cen</cite>.</p>
</dd></dl>

<dl class="class">
<dt id="pynbody.filt.Cuboid">
<em class="property">class </em><tt class="descclassname">pynbody.filt.</tt><tt class="descname">Cuboid</tt><big>(</big><em>x1</em>, <em>y1=None</em>, <em>z1=None</em>, <em>x2=None</em>, <em>y2=None</em>, <em>z2=None</em><big>)</big><a class="reference internal" href="_modules/pynbody/filt.html#Cuboid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.filt.Cuboid" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a cube with specified edge coordinates. If any of the cube
coordinates <cite>x1</cite>, <cite>y1</cite>, <cite>z1</cite>, <cite>x2</cite>, <cite>y2</cite>, <cite>z2</cite> are not specified
they are determined as <cite>y1=x1;</cite> <cite>z1=x1;</cite> <cite>x2=-x1;</cite> <cite>y2=-y1;</cite>
<cite>z2=-z1</cite>.</p>
</dd></dl>

<dl class="class">
<dt id="pynbody.filt.Disc">
<em class="property">class </em><tt class="descclassname">pynbody.filt.</tt><tt class="descname">Disc</tt><big>(</big><em>radius</em>, <em>height</em>, <em>cen=(0</em>, <em>0</em>, <em>0)</em><big>)</big><a class="reference internal" href="_modules/pynbody/filt.html#Disc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.filt.Disc" title="Permalink to this definition">¶</a></dt>
<dd><p>Return particles that are within a disc of extent <cite>radius</cite> and
thickness <cite>height</cite> centered on <cite>cen</cite>.</p>
</dd></dl>

<dl class="class">
<dt id="pynbody.filt.BandPass">
<em class="property">class </em><tt class="descclassname">pynbody.filt.</tt><tt class="descname">BandPass</tt><big>(</big><em>prop</em>, <em>min</em>, <em>max</em><big>)</big><a class="reference internal" href="_modules/pynbody/filt.html#BandPass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.filt.BandPass" title="Permalink to this definition">¶</a></dt>
<dd><p>Return particles whose property <cite>prop</cite> is within <cite>min</cite> and <cite>max</cite>,
which can be specified as unit strings.</p>
</dd></dl>

<dl class="class">
<dt id="pynbody.filt.HighPass">
<em class="property">class </em><tt class="descclassname">pynbody.filt.</tt><tt class="descname">HighPass</tt><big>(</big><em>prop</em>, <em>min</em><big>)</big><a class="reference internal" href="_modules/pynbody/filt.html#HighPass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.filt.HighPass" title="Permalink to this definition">¶</a></dt>
<dd><p>Return particles whose property <cite>prop</cite> exceeds <cite>min</cite>, which can be
specified as a unit string.</p>
</dd></dl>

<dl class="class">
<dt id="pynbody.filt.LowPass">
<em class="property">class </em><tt class="descclassname">pynbody.filt.</tt><tt class="descname">LowPass</tt><big>(</big><em>prop</em>, <em>max</em><big>)</big><a class="reference internal" href="_modules/pynbody/filt.html#LowPass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.filt.LowPass" title="Permalink to this definition">¶</a></dt>
<dd><p>Return particles whose property <cite>prop</cite> is less than <cite>max</cite>, which can be
specified as a unit string.</p>
</dd></dl>

<dl class="function">
<dt id="pynbody.filt.Annulus">
<tt class="descclassname">pynbody.filt.</tt><tt class="descname">Annulus</tt><big>(</big><em>r1</em>, <em>r2</em>, <em>cen=(0</em>, <em>0</em>, <em>0)</em><big>)</big><a class="reference internal" href="_modules/pynbody/filt.html#Annulus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.filt.Annulus" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function that returns a filter which selects particles
in between two spheres specified by radii <cite>r1</cite> and <cite>r2</cite> centered
on <cite>cen</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="pynbody.filt.SolarNeighborhood">
<tt class="descclassname">pynbody.filt.</tt><tt class="descname">SolarNeighborhood</tt><big>(</big><em>r1=Unit(&quot;5.00e+00 kpc&quot;)</em>, <em>r2=Unit(&quot;1.00e+01 kpc&quot;)</em>, <em>height=Unit(&quot;2.00e+00 kpc&quot;)</em>, <em>cen=(0</em>, <em>0</em>, <em>0)</em><big>)</big><a class="reference internal" href="_modules/pynbody/filt.html#SolarNeighborhood"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.filt.SolarNeighborhood" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function that returns a filter which selects particles
in a disc between radii <cite>r1</cite> and <cite>r2</cite> and thickness <cite>height</cite>.</p>
</dd></dl>

</div>
<span class="target" id="module-pynbody.halo"></span><div class="section" id="halo">
<h2>halo<a class="headerlink" href="#halo" title="Permalink to this headline">¶</a></h2>
<p>Implements halo catalogue functions. If you have a supported halo
catalogue on disk or a halo finder installed and correctly configured,
you can access a halo catalogue through f.halos() where f is a
SimSnap.</p>
<p>See the <a class="reference external" href="http://pynbody.github.io/pynbody/tutorials/halos.html">halo tutorial</a> for some
examples.</p>
<dl class="class">
<dt id="pynbody.halo.Halo">
<em class="property">class </em><tt class="descclassname">pynbody.halo.</tt><tt class="descname">Halo</tt><big>(</big><em>halo_id</em>, <em>halo_catalogue</em>, <em>*args</em><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#Halo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.Halo" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic class representing a halo.</p>
<dl class="method">
<dt id="pynbody.halo.Halo.is_subhalo">
<tt class="descname">is_subhalo</tt><big>(</big><em>otherhalo</em><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#Halo.is_subhalo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.Halo.is_subhalo" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function that calls the corresponding function in
a halo catalogue.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pynbody.halo.HaloCatalogue">
<em class="property">class </em><tt class="descclassname">pynbody.halo.</tt><tt class="descname">HaloCatalogue</tt><a class="reference internal" href="_modules/pynbody/halo.html#HaloCatalogue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.HaloCatalogue" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic halo catalogue object.</p>
<dl class="method">
<dt id="pynbody.halo.HaloCatalogue.is_subhalo">
<tt class="descname">is_subhalo</tt><big>(</big><em>childid</em>, <em>parentid</em><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#HaloCatalogue.is_subhalo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.HaloCatalogue.is_subhalo" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether the specified &#8216;childid&#8217; halo is a subhalo
of &#8216;parentid&#8217; halo.</p>
</dd></dl>

<dl class="method">
<dt id="pynbody.halo.HaloCatalogue.get_group_array">
<tt class="descname">get_group_array</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#HaloCatalogue.get_group_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.HaloCatalogue.get_group_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an array with an integer for each particle in the simulation
indicating which halo that particle is associated with. If there are multiple
levels (i.e. subhalos), the number returned corresponds to the lowest level, i.e.
the smallest subhalo.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pynbody.halo.RockstarCatalogue">
<em class="property">class </em><tt class="descclassname">pynbody.halo.</tt><tt class="descname">RockstarCatalogue</tt><big>(</big><em>sim</em>, <em>make_grp=None</em>, <em>dummy=False</em>, <em>use_iord=None</em>, <em>filename=None</em><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#RockstarCatalogue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.RockstarCatalogue" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to handle catalogues produced by Rockstar (by Peter Behroozi).</p>
<dl class="method">
<dt id="pynbody.halo.RockstarCatalogue.make_grp">
<tt class="descname">make_grp</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#RockstarCatalogue.make_grp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.RockstarCatalogue.make_grp" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a &#8216;grp&#8217; array which labels each particle according to
its parent halo.</p>
</dd></dl>

<dl class="method">
<dt id="pynbody.halo.RockstarCatalogue.load_copy">
<tt class="descname">load_copy</tt><big>(</big><em>i</em><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#RockstarCatalogue.load_copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.RockstarCatalogue.load_copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a fresh SimSnap with only the particle in halo i</p>
</dd></dl>

<dl class="method">
<dt id="pynbody.halo.RockstarCatalogue.writestat">
<tt class="descname">writestat</tt><big>(</big><em>outfile=None</em>, <em>hubble=None</em><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#RockstarCatalogue.writestat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.RockstarCatalogue.writestat" title="Permalink to this definition">¶</a></dt>
<dd><p>write a condensed skid.stat style ascii file from ahf_halos
file.  header + 1 halo per line. should reproduce <a href="#id1"><span class="problematic" id="id2">`</span></a>Alyson&#8217;s
idl script&#8217; except does not do last 2 columns (Is it a
satellite?) and (Is central halo is <a href="#id3"><span class="problematic" id="id4">`</span></a>false&#8217;ly split?).  output
units are set to Mpc Msun, km/s.</p>
<p>user can specify own hubble constant hubble=(H0/(100
km/s/Mpc)), ignoring the snaphot arg for hubble constant
(which sometimes has a large roundoff error).</p>
</dd></dl>

<dl class="method">
<dt id="pynbody.halo.RockstarCatalogue.writetipsy">
<tt class="descname">writetipsy</tt><big>(</big><em>outfile=None</em>, <em>hubble=None</em><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#RockstarCatalogue.writetipsy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.RockstarCatalogue.writetipsy" title="Permalink to this definition">¶</a></dt>
<dd><p>write halos to tipsy file (write as stars) from ahf_halos
file.  returns a shapshot where each halo is a star particle.</p>
<p>user can specify own hubble constant hubble=(H0/(100
km/s/Mpc)), ignoring the snaphot arg for hubble constant
(which sometimes has a large roundoff error).</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pynbody.halo.AHFCatalogue">
<em class="property">class </em><tt class="descclassname">pynbody.halo.</tt><tt class="descname">AHFCatalogue</tt><big>(</big><em>sim</em>, <em>make_grp=None</em>, <em>dummy=False</em>, <em>use_iord=None</em>, <em>ahf_basename=None</em><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#AHFCatalogue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.AHFCatalogue" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to handle catalogues produced by Amiga Halo Finder (AHF).</p>
<dl class="method">
<dt id="pynbody.halo.AHFCatalogue.make_grp">
<tt class="descname">make_grp</tt><big>(</big><em>name='grp'</em><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#AHFCatalogue.make_grp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.AHFCatalogue.make_grp" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a &#8216;grp&#8217; array which labels each particle according to
its parent halo.</p>
</dd></dl>

<dl class="method">
<dt id="pynbody.halo.AHFCatalogue.load_copy">
<tt class="descname">load_copy</tt><big>(</big><em>i</em><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#AHFCatalogue.load_copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.AHFCatalogue.load_copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the a fresh SimSnap with only the particle in halo i</p>
</dd></dl>

<dl class="method">
<dt id="pynbody.halo.AHFCatalogue.writegrp">
<tt class="descname">writegrp</tt><big>(</big><em>grpoutfile=False</em><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#AHFCatalogue.writegrp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.AHFCatalogue.writegrp" title="Permalink to this definition">¶</a></dt>
<dd><p>simply write a skid style .grp file from ahf_particles
file. header = total number of particles, then each line is
the halo id for each particle (0 means free).</p>
</dd></dl>

<dl class="method">
<dt id="pynbody.halo.AHFCatalogue.writestat">
<tt class="descname">writestat</tt><big>(</big><em>snapshot</em>, <em>halos</em>, <em>statoutfile</em>, <em>hubble=None</em><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#AHFCatalogue.writestat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.AHFCatalogue.writestat" title="Permalink to this definition">¶</a></dt>
<dd><p>write a condensed skid.stat style ascii file from ahf_halos
file.  header + 1 halo per line. should reproduce <a href="#id5"><span class="problematic" id="id6">`</span></a>Alyson&#8217;s
idl script&#8217; except does not do last 2 columns (Is it a
satellite?) and (Is central halo is <a href="#id7"><span class="problematic" id="id8">`</span></a>false&#8217;ly split?).  output
units are set to Mpc Msun, km/s.</p>
<p>user can specify own hubble constant hubble=(H0/(100
km/s/Mpc)), ignoring the snaphot arg for hubble constant
(which sometimes has a large roundoff error).</p>
</dd></dl>

<dl class="method">
<dt id="pynbody.halo.AHFCatalogue.writetipsy">
<tt class="descname">writetipsy</tt><big>(</big><em>snapshot</em>, <em>halos</em>, <em>tipsyoutfile</em>, <em>hubble=None</em><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#AHFCatalogue.writetipsy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.AHFCatalogue.writetipsy" title="Permalink to this definition">¶</a></dt>
<dd><p>write halos to tipsy file (write as stars) from ahf_halos
file.  returns a shapshot where each halo is a star particle.</p>
<p>user can specify own hubble constant hubble=(H0/(100
km/s/Mpc)), ignoring the snaphot arg for hubble constant
(which sometimes has a large roundoff error).</p>
</dd></dl>

<dl class="method">
<dt id="pynbody.halo.AHFCatalogue.writehalos">
<tt class="descname">writehalos</tt><big>(</big><em>snapshot</em>, <em>halos</em>, <em>hubble=None</em>, <em>outfile=None</em><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#AHFCatalogue.writehalos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.AHFCatalogue.writehalos" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the (ahf) halo catalog to disk.  This is really a
wrapper that calls writegrp, writetipsy, writestat.  Writes
.amiga.grp file (ascii group ids), .amiga.stat file (ascii
halo catalog) and .amiga.gtp file (tipsy halo catalog).
default outfile base simulation is same as snapshot s.
function returns simsnap of halo catalog.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pynbody.halo.GrpCatalogue">
<em class="property">class </em><tt class="descclassname">pynbody.halo.</tt><tt class="descname">GrpCatalogue</tt><big>(</big><em>sim</em>, <em>array='grp'</em><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#GrpCatalogue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.GrpCatalogue" title="Permalink to this definition">¶</a></dt>
<dd><p>A generic catalogue using a .grp file to specify which particles
belong to which group.</p>
<dl class="method">
<dt id="pynbody.halo.GrpCatalogue.precalculate">
<tt class="descname">precalculate</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#GrpCatalogue.precalculate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.GrpCatalogue.precalculate" title="Permalink to this definition">¶</a></dt>
<dd><p>Speed up future operations by precalculating the indices
for all halos in one operation. This is slow compared to
getting a single halo, however.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pynbody.halo.SubfindCatalogue">
<em class="property">class </em><tt class="descclassname">pynbody.halo.</tt><tt class="descname">SubfindCatalogue</tt><big>(</big><em>sim</em><big>)</big><a class="reference internal" href="_modules/pynbody/halo.html#SubfindCatalogue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.halo.SubfindCatalogue" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to handle catalogues produced by the SubFind halo finder.
Currently only imports groups (top level), no specific subhalos.
Groups are sorted by mass (descending), most massive group is halo[0].</p>
</dd></dl>

</div>
<span class="target" id="module-pynbody.sph"></span><div class="section" id="sph">
<h2>sph<a class="headerlink" href="#sph" title="Permalink to this headline">¶</a></h2>
<p>pynbody SPH rendering module.</p>
<p>This module encompasses Kernel objects, which return C fragments from which
a final C code to perform the rendering is derived.</p>
<p>For most users, the function of interest will be <a class="reference internal" href="reference/convenience.html#pynbody.sph.render_image" title="pynbody.sph.render_image"><tt class="xref py py-func docutils literal"><span class="pre">render_image()</span></tt></a>.</p>
<dl class="function">
<dt id="pynbody.sph.render_spherical_image">
<tt class="descclassname">pynbody.sph.</tt><tt class="descname">render_spherical_image</tt><big>(</big><em>snap</em>, <em>qty='rho'</em>, <em>nside=8</em>, <em>distance=10.0</em>, <em>kernel=&lt;pynbody.sph.Kernel object at 0x10b3c1310&gt;</em>, <em>kstep=0.5</em>, <em>denoise=False</em>, <em>out_units=None</em>, <em>threaded=None</em><big>)</big><a class="reference internal" href="_modules/pynbody/sph.html#render_spherical_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.sph.render_spherical_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Render an SPH image on a spherical surface. Requires healpy libraries.</p>
<p><strong>Keyword arguments:</strong></p>
<p><em>qty</em> (&#8216;rho&#8217;): The name of the simulation array to render</p>
<p><em>nside</em> (8): The healpix nside resolution to use (must be power of 2)</p>
<dl class="docutils">
<dt><em>distance</em> (10.0): The distance of the shell (for 3D kernels) or maximum distance</dt>
<dd>of the skewers (2D kernels)</dd>
</dl>
<p><em>kernel</em>: The Kernel object to use (defaults to 3D spline kernel)</p>
<dl class="docutils">
<dt><em>kstep</em> (0.5): The sampling distance when projecting onto the spherical surface in units of the</dt>
<dd>smoothing length</dd>
<dt><em>denoise</em> (False): if True, divide through by an estimate of the discreteness noise.</dt>
<dd>The returned image is then not strictly an SPH estimate, but this option can be
useful to reduce noise.</dd>
<dt><em>threaded</em>: if False, render on a single core. Otherwise, the number of threads to use.</dt>
<dd>Defaults to a value specified in your configuration files. <em>Currently multi-threaded
rendering is slower than single-threaded because healpy does not release the gil</em>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynbody.sph.render_image">
<tt class="descclassname">pynbody.sph.</tt><tt class="descname">render_image</tt><big>(</big><em>snap</em>, <em>qty='rho'</em>, <em>x2=100</em>, <em>nx=500</em>, <em>y2=None</em>, <em>ny=None</em>, <em>x1=None</em>, <em>y1=None</em>, <em>z_plane=0.0</em>, <em>out_units=None</em>, <em>xy_units=None</em>, <em>kernel=&lt;pynbody.sph.Kernel object at 0x1099b1810&gt;</em>, <em>z_camera=None</em>, <em>smooth='smooth'</em>, <em>smooth_in_pixels=False</em>, <em>force_quiet=False</em>, <em>approximate_fast=True</em>, <em>threaded=None</em>, <em>denoise=False</em><big>)</big><a class="reference internal" href="_modules/pynbody/sph.html#render_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.sph.render_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Render an SPH image using a typical (mass/rho)-weighted &#8216;scatter&#8217;
scheme.</p>
<p><strong>Keyword arguments:</strong></p>
<p><em>qty</em> (&#8216;rho&#8217;): The name of the array within the simulation to render</p>
<p><em>x2</em> (100.0): The x-coordinate of the right edge of the image</p>
<p><em>nx</em> (500): The number of pixels wide to make the image</p>
<dl class="docutils">
<dt><em>y2</em>: The y-coordinate of the upper edge of the image (default x2,</dt>
<dd>or if ny is specified, x2*ny/nx)</dd>
</dl>
<p><em>ny</em> (nx): The number of pixels tall to make the image</p>
<p><em>x1</em> (-x2): The x-coordinate of the left edge of the image</p>
<p><em>y1</em> (-y2): The y-coordinate of the lower edge of the image</p>
<p><em>z_plane</em> (0.0): The z-coordinate of the plane of the image</p>
<p><em>out_units</em> (no conversion): The units to convert the output image into</p>
<p><em>xy_units</em>: The units for the x and y axes</p>
<p><em>kernel</em>: The Kernel object to use (default Kernel(), a 3D spline kernel)</p>
<dl class="docutils">
<dt><em>z_camera</em>: If this is set, a perspective image is rendered,</dt>
<dd><p class="first">assuming the kernel is suitable (i.e. is a projecting
kernel). The camera is at the specified z coordinate looking
towards -ve z, and each pixel represents a line-of-sight radially
outwards from the camera. The width then specifies the width of
the image in the z=0 plane. Particles too close to the camera are
also excluded.</p>
<dl class="docutils">
<dt><em>smooth</em>: The name of the array which contains the smoothing lengths</dt>
<dd>(default &#8216;smooth&#8217;)</dd>
<dt><em>smooth_in_pixels</em>: If True, the smoothing array contains the smoothing</dt>
<dd>length in image pixels, rather than in real distance units (default False)</dd>
<dt><em>approximate_fast</em>: if True, render high smoothing length particles at</dt>
<dd>progressively lower resolution, resample and sum</dd>
<dt><em>denoise</em>: if True, divide through by an estimate of the discreteness noise.</dt>
<dd>The returned image is then not strictly an SPH estimate, but this option
can be useful to reduce noise especially when rendering AMR grids which
often introduce problematic edge effects.</dd>
</dl>
<p><em>verbose</em>: if True, all text output suppressed</p>
<dl class="last docutils">
<dt><em>threaded</em>: if False (or None), render on a single core. Otherwise,</dt>
<dd>the number of threads to use (defaults to a value specified in your
configuration files).</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pynbody.sph.to_3d_grid">
<tt class="descclassname">pynbody.sph.</tt><tt class="descname">to_3d_grid</tt><big>(</big><em>snap</em>, <em>qty='rho'</em>, <em>nx=None</em>, <em>ny=None</em>, <em>nz=None</em>, <em>x2=None</em>, <em>out_units=None</em>, <em>xy_units=None</em>, <em>kernel=&lt;pynbody.sph.Kernel object at 0x1099b1850&gt;</em>, <em>smooth='smooth'</em>, <em>approximate_fast=True</em>, <em>threaded=None</em>, <em>snap_slice=None</em>, <em>denoise=False</em><big>)</big><a class="reference internal" href="_modules/pynbody/sph.html#to_3d_grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.sph.to_3d_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Project SPH onto a grid using a typical (mass/rho)-weighted &#8216;scatter&#8217;
scheme.</p>
<p><strong>Keyword arguments:</strong></p>
<p><em>qty</em> (&#8216;rho&#8217;): The name of the array within the simulation to render</p>
<p><em>nx</em> (x2-x1 / soft): The number of pixels wide to make the grid</p>
<p><em>ny</em> (nx): The number of pixels tall to make the grid</p>
<p><em>nz</em> (nx): The number of pixels deep to make the grid</p>
<p><em>out_units</em> (no conversion): The units to convert the output grid into</p>
<p><em>xy_units</em>: The units for the x and y axes</p>
<p><em>kernel</em>: The Kernel object to use (default Kernel(), a 3D spline kernel)</p>
<dl class="docutils">
<dt><em>smooth</em>: The name of the array which contains the smoothing lengths</dt>
<dd>(default &#8216;smooth&#8217;)</dd>
<dt><em>denoise</em>: if True, divide through by an estimate of the discreteness noise.</dt>
<dd>The returned image is then not strictly an SPH estimate, but this option
can be useful to reduce noise especially when rendering AMR grids which
often introduce problematic edge effects.</dd>
</dl>
</dd></dl>

</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="_sources/convenience.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2011-14, pynbody team https://github.com/pynbody/pynbody/graphs/contributors.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>